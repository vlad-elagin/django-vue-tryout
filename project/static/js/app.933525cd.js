(function(t){function e(e){for(var n,a,i=e[0],u=e[1],l=e[2],d=0,p=[];d<i.length;d++)a=i[d],r[a]&&p.push(r[a][0]),r[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);c&&c(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),o()}function o(){for(var t,e=0;e<s.length;e++){for(var o=s[e],n=!0,i=1;i<o.length;i++){var u=o[i];0!==r[u]&&(n=!1)}n&&(s.splice(e--,1),t=a(a.s=o[0]))}return t}var n={},r={1:0},s=[];function a(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=n,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},a.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var c=u;s.push([9,0]),o()})({"074G":function(t,e,o){},"6JWR":function(t,e,o){"use strict";var n=o("QwRx"),r=o.n(n);r.a},"6bHS":function(t,e,o){"use strict";var n=o("074G"),r=o.n(n);r.a},9:function(t,e,o){t.exports=o("Vtdi")},A2zq:function(t,e,o){"use strict";var n=o("A78y"),r=o.n(n);r.a},A78y:function(t,e,o){},C8h3:function(t,e,o){},GuyW:function(t,e,o){},H1gC:function(t,e,o){t.exports=o.p+"img/loli.2e793c39.png"},"IJy+":function(t,e,o){},J1Lr:function(t,e,o){"use strict";var n=o("C8h3"),r=o.n(n);r.a},N45m:function(t,e,o){"use strict";var n=o("YP56"),r=o.n(n);r.a},QwRx:function(t,e,o){},Sd98:function(t,e,o){"use strict";var n=o("zizm"),r=o.n(n);r.a},Vtdi:function(t,e,o){"use strict";o.r(e);o("VRzm");var n=o("Kw5r"),r=o("jE9Z"),s=o("Snq/"),a=o.n(s),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("Header"),t._v(" "),n("router-view"),t._v(" "),n("ModalContainer"),t._v(" "),n("img",{staticClass:"loli",attrs:{src:o("H1gC"),alt:""}})],1)},u=[],l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("header",[o("span",{staticClass:"heading"},[t._v("Pomodoro Timer")]),t._v(" "),t.user?o("div",[o("span",{staticClass:"heading"},[t._v("Hello, "+t._s(t.user))]),t._v(" "),o("a",{staticClass:"btn btn-bordered",on:{click:t.logMeOutPlease}},[t._v("Log Out")])]):o("div",[o("router-link",{staticClass:"btn btn-bordered",attrs:{to:"/login"}},[t._v("Log In")]),t._v(" "),o("router-link",{staticClass:"btn btn-bordered",attrs:{to:"/signup"}},[t._v("Sign Up")])],1)])},c=[],d={name:"Header",computed:{user:function(){return this.$store.state.user.username||null}},methods:{logMeOutPlease:function(){this.$store.dispatch("USER_SIGN_OUT")}}},p=d,m=(o("A2zq"),o("KHd+")),v=Object(m["a"])(p,l,c,!1,null,null,null),f=v.exports,h=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"modal-container"},[t.modal?o("div",{staticClass:"modal-overlay"},[o("div",{staticClass:"modal"},[o("div",{staticClass:"modal-header"},[o("span",[t._v(t._s(t.modal.title))]),t._v(" "),o("span",{staticClass:"btn btn-bordered",on:{click:t.close}},[t._v("Dismiss")])]),t._v(" "),o("div",{staticClass:"modal-body"},[o("p",[t._v(t._s(t.modal.message))]),t._v(" "),t.modal.errors?o("div",{staticClass:"modal-body-errors"},t._l(t.modal.errors,function(e,n,r){return o("ul",{key:r},[o("li",{staticClass:"error-field"},[t._v(t._s(n))]),t._v(" "),t._l(e,function(e,n){return o("li",{key:n},[t._v("\n              "+t._s(e)+"\n            ")])})],2)})):t._e()])])]):t._e()])},g=[],_={name:"ModalContainer",computed:{modal:function(){return this.$store.state.modal}},methods:{close:function(){this.$store.commit("modal:close")}}},b=_,O=(o("6bHS"),Object(m["a"])(b,h,g,!1,null,null,null)),w=O.exports,P={name:"app",components:{Header:f,ModalContainer:w}},C=P,y=(o("J1Lr"),Object(m["a"])(C,i,u,!1,null,null,null)),S=y.exports,x=o("L2JU"),k=o("XVfz"),R=o.n(k),M=(o("ls82"),o("MECJ")),E=(o("Z2Ku"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login-form"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],attrs:{type:"text",placeholder:"username"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],attrs:{type:"password",placeholder:"password"},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}}),t._v(" "),o("div",{staticClass:"btn btn-ok",on:{click:t.logMeInPlease}},[t._v("\n    Go!\n  ")])])}),T=[],I={name:"LoginForm",data:function(){return{login:"",pass:""}},methods:{logMeInPlease:function(){var t=this.login,e=this.pass;this.$store.dispatch("USER_SIGN_IN",{username:t,password:e}),this.login="",this.pass=""}}},D=I,N=(o("6JWR"),Object(m["a"])(D,E,T,!1,null,null,null)),j=N.exports,$=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login-form"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],attrs:{type:"text",placeholder:"username"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],attrs:{type:"password",placeholder:"password"},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPass,expression:"confirmPass"}],attrs:{type:"password",placeholder:"confirm password"},domProps:{value:t.confirmPass},on:{input:function(e){e.target.composing||(t.confirmPass=e.target.value)}}}),t._v(" "),o("div",{staticClass:"btn btn-ok",on:{click:t.signMeUpPlease}},[t._v("\n    Go!\n  ")])])},G=[],U={name:"SignUpForm",data:function(){return{login:"",pass:"",confirmPass:""}},methods:{signMeUpPlease:function(){var t=this.login,e=this.pass,o=this.confirmPass;this.$store.dispatch("USER_SIGN_UP",{username:t,password:e,confirm_password:o}),this.login="",this.pass="",this.confirmPass=""}}},L=U,H=Object(m["a"])(L,$,G,!1,null,null,null),A=H.exports,J=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"timer-page"},[t.pomodoro?o("CurrentPomodoro"):o("NewPomodoro"),t._v(" "),o("PomodoroList")],1)},z=[],Y=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"new-pomodoro"},[o("div",{staticClass:"left-side"},[o("span",[t._v("Pomodoro duration:")]),t._v(" "),o("v-select",{attrs:{options:t.durations,value:t.duration,searchable:!1,onChange:t.onDurationSelect}}),t._v(" "),o("span",[t._v("minutes")])],1),t._v(" "),o("a",{staticClass:"btn btn-bordered",on:{click:t.onPomodoroStart}},[t._v("Start!")])])},F=[],q={name:"NewPomodoro",data:function(){return{durations:["2","20","25","30","35","40"],duration:"30"}},methods:{onDurationSelect:function(t){this.duration=t},onPomodoroStart:function(t){t.preventDefault(),this.$store.dispatch("POMODOROS_START",{duration:this.duration})}}},B=q,W=(o("N45m"),Object(m["a"])(B,Y,F,!1,null,null,null)),V=W.exports,Z=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"current-pomodoro"},[o("div",{staticClass:"progress-bar"},[o("span",{staticClass:"progress-bar-time"},[t._v(t._s(t._f("duration")(t.duration)))]),t._v(" "),o("div",{staticClass:"progress-bar-inner",style:{width:t.progress+"%"}},[o("span",{staticClass:"progress-bar-time"},[t._v(t._s(t._f("duration")(t.duration)))])])]),t._v(" "),o("a",{staticClass:"btn btn-bordered",on:{click:t.onPomodoroStop}},[t._v("Stop!")])])},K=[],Q=(o("hLT2"),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",o=new Date(t),n=new Date,r=(n.getTime()-o.getTime())/1e3;return"s"===e?r:{minutes:Math.floor(r/60),seconds:Math.trunc(r-60*Math.floor(r/60))}}),X=Q,tt={name:"NewPomodoro",methods:{onPomodoroStop:function(t){t.preventDefault(),this.stopTimer()},stopTimer:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.updateInterval&&(clearInterval(this.updateInterval),this.$store.dispatch("POMODOROS_FINISH",{status:t?"finished":"stopped"}))}},data:function(){return{duration:{minutes:0,seconds:0},progress:0}},mounted:function(){var t=this,e=this.$store.state.pomodoro;this.duration=X(e.started_at),this.progress=Math.trunc(100*X(e.started_at,"s")/(60*e.duration)),this.updateInterval||(this.updateInterval=setInterval(function(){var o=Math.trunc(100*X(e.started_at,"s")/(60*e.duration));100===o&&t.stopTimer(!0),t.duration=X(e.started_at),t.progress=o},1e3))},beforeDestroy:function(){clearInterval(this.updateInterval)},filters:{duration:function(t){var e=t.minutes.toString();1===e.length&&(e="0"+e);var o=t.seconds.toString();return 1===o.length&&(o="0"+o),"".concat(e,":").concat(o)}}},et=tt,ot=(o("ZUTN"),Object(m["a"])(et,Z,K,!1,null,null,null)),nt=ot.exports,rt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"pomodoro-list"},[o("div",{staticClass:"pomodoro-list-heading"},[t._v("\n    Your pomodoros:\n    "),o("a",{staticClass:"btn btn-bordered",on:{click:t.getPomodoros}},[t._v("Refresh")])]),t._v(" "),o("div",{staticClass:"pomodoro-list-body"},t._l(t.pomodoros,function(e,n){return o("ul",{key:n},[o("li",{staticClass:"pomodoro-list-date"},[t._v(t._s(n))]),t._v(" "),t._l(e,function(e){return o("li",{key:e.id,staticClass:"pomodoro-list-item"},[o("span",{staticClass:"duration"},[t._v("Duration: "+t._s(e.duration)+" minutes")]),t._v(" "),o("span",{staticClass:"started-at"},[t._v("Started: "+t._s(t._f("tinytime")(e.started_at)))]),t._v(" "),"finished"===e.status?o("span",{staticClass:"finished"},[t._v("Finished")]):"In progress"===e.status?o("span",{staticClass:"in-progress"},[t._v("In progress")]):o("span",{staticClass:"failed"},[t._v("Failed")])])})],2)}))])},st=[],at=o("F/us"),it=o("SYun"),ut=o.n(it),lt={name:"PomodoroList",computed:{pomodoros:function(){return Object(at["groupBy"])(this.$store.state.pomodorosList,function(t){var e=ut()("{DD} {MMMM}");return e.render(new Date(t.started_at))})}},methods:{getPomodoros:function(){this.$store.dispatch("POMODOROS_GET")}},filters:{tinytime:function(t){return ut()("{H}:{mm}").render(new Date(t))}},mounted:function(){this.$store.dispatch("POMODOROS_GET")}},ct=lt,dt=(o("Sd98"),Object(m["a"])(ct,rt,st,!1,null,null,null)),pt=dt.exports,mt={name:"TimerPage",components:{NewPomodoro:V,CurrentPomodoro:nt,PomodoroList:pt},computed:{pomodoro:function(){return this.$store.state.pomodoro.id||null}}},vt=mt,ft=(o("yge0"),Object(m["a"])(vt,J,z,!1,null,null,null)),ht=ft.exports,gt=[{path:"/"},{path:"/login",component:j},{path:"/signup",component:A},{path:"/timer",component:ht}],_t=new r["a"]({routes:gt});_t.beforeEach(function(t,e,o){if("/"===t.path)return zt.state.user.token?o("/timer"):o("/login");var n=["/login","/signup"];if(zt.state.user.token&&n.includes(t.path))return o("/timer");var r=["/timer"];if(!zt.state.user.token&&r.includes(t.path))return o("/login");o()});var bt=_t,Ot=o("vDqi"),wt=o.n(Ot),Pt=function(){var t=Object(M["a"])(regeneratorRuntime.mark(function t(e,o){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,wt()({method:"POST",url:"/api/user/signup/",data:o});case 2:if(n=t.sent,201===n.status){t.next=6;break}return e.commit("modal:open",{title:"Error while signing up",message:"Big bad python is complaining again:",errors:n.errors}),t.abrupt("return");case 6:e.dispatch("MODAL_OPEN",{title:"Welcome onboard!",message:"Your account have been created, please login.",autoDismiss:3}),bt.push("/login");case 8:case"end":return t.stop()}},t,this)}));return function(e,o){return t.apply(this,arguments)}}(),Ct=function(){var t=Object(M["a"])(regeneratorRuntime.mark(function t(e,o){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,wt()({method:"POST",url:"/api/user/signin/",data:o});case 2:if(n=t.sent,200===n.status){t.next=6;break}return e.commit("modal:open",{title:"Error while signing in",message:"Big bad python is complaining again:",errors:n.errors}),t.abrupt("return");case 6:e.commit("user:logged",{username:n.data.user,token:n.data.token});case 7:case"end":return t.stop()}},t,this)}));return function(e,o){return t.apply(this,arguments)}}(),yt=function(){var t=Object(M["a"])(regeneratorRuntime.mark(function t(e){var o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,wt()({method:"GET",url:"/api/user/logout/"});case 2:o=t.sent,200!==o.status&&e.commit("modal:open",{title:"Error while logging out",message:"Your token have probably expired"}),e.commit("user:logged_out");case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),St=function(t,e){t.commit("modal:open",e),e.autoDismiss&&setTimeout(function(){t.commit("modal:close")},1e3*e.autoDismiss)},xt=function(){var t=Object(M["a"])(regeneratorRuntime.mark(function t(e){var o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,wt()({method:"GET",url:"/api/pomodoros/"});case 2:if(o=t.sent,200===o.status){t.next=6;break}return e.commit("modal:open",{title:"Error occured when fetching pomodoros",message:"You can try again but honestly I dont think it will help"}),t.abrupt("return");case 6:e.commit("pomodoros:list",o.data);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),kt=function(){var t=Object(M["a"])(regeneratorRuntime.mark(function t(e,o){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,wt()({method:"POST",url:"/api/pomodoros/",data:o});case 2:if(n=t.sent,201===n.status){t.next=6;break}return e.commit("modal:open",{title:"Oops...",message:"Big bad python is complaining again",errors:n.errors}),t.abrupt("return");case 6:e.dispatch("POMODOROS_GET"),e.commit("pomodoros:start",n.data);case 8:case"end":return t.stop()}},t,this)}));return function(e,o){return t.apply(this,arguments)}}(),Rt=function(){var t=Object(M["a"])(regeneratorRuntime.mark(function t(e,o){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=o.status,t.next=3,wt()({method:"PATCH",url:"/api/pomodoros/",data:{id:e.state.pomodoro.id,status:"stopped"===n?"failed":"finished"}});case 3:if(r=t.sent,200===r.status){t.next=7;break}return e.commit("modal:open",{title:"Oops...",message:"Big bad python is complaining again",errors:r.errors}),t.abrupt("return");case 7:"finished"===n&&200===r.status&&e.commit("modal:open",{title:"Oooh yes!",message:"You did it, baby. It's time to stretch up a bit and start new pomodoro!"}),e.dispatch("POMODOROS_GET"),e.commit("pomodoros:finish");case 10:case"end":return t.stop()}},t,this)}));return function(e,o){return t.apply(this,arguments)}}(),Mt={USER_SIGN_IN:Ct,USER_SIGN_UP:Pt,USER_SIGN_OUT:yt,MODAL_OPEN:St,POMODOROS_GET:xt,POMODOROS_START:kt,POMODOROS_FINISH:Rt},Et=Mt,Tt=o("yT7P"),It=function(t,e){t.user=Object(Tt["a"])({},e),bt.push("/timer")},Dt=function(t){t.user={},bt.push("/login")},Nt=function(t,e){t.modal=Object(Tt["a"])({},e)},jt=function(t){return t.modal=null},$t=function(t,e){t.pomodorosList=e},Gt=function(t,e){t.pomodoro=e},Ut=function(t){t.pomodoro={}},Lt={"user:logged":It,"user:logged_out":Dt,"modal:open":Nt,"modal:close":jt,"pomodoros:list":$t,"pomodoros:start":Gt,"pomodoros:finish":Ut},Ht=Lt;n["a"].use(x["a"]);var At=new R.a({storage:window.localStorage,reducer:function(t){return{user:{token:t.user.token,username:t.user.username},pomodoro:{id:t.pomodoro.id,started_at:t.pomodoro.started_at,duration:t.pomodoro.duration}}}}),Jt=new x["a"].Store({state:{user:{},modal:null,pomodorosList:[],pomodoro:{}},mutations:Ht,actions:Et,plugins:[At.plugin]}),zt=Jt;wt.a.interceptors.request.use(function(t){return zt.state.user.token&&(t.headers["Authorization"]="Token ".concat(zt.state.user.token)),t},null),wt.a.interceptors.response.use(null,function(t){return Promise.resolve({status:t.response.status,errors:t.response.data.errors})});o("IJy+");n["a"].config.productionTip=!1,n["a"].use(r["a"]),n["a"].component("v-select",a.a),new n["a"]({store:zt,router:bt,render:function(t){return t(S)}}).$mount("#app")},YP56:function(t,e,o){},ZUTN:function(t,e,o){"use strict";var n=o("o7M/"),r=o.n(n);r.a},"o7M/":function(t,e,o){},yge0:function(t,e,o){"use strict";var n=o("GuyW"),r=o.n(n);r.a},zizm:function(t,e,o){}});
//# sourceMappingURL=app.933525cd.js.map